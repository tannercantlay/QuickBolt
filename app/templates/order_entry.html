{% extends "navbar.html" %}

{% block content %}
<title>OrderEntry</title>
<br>
<div class="w3-container w3-center">
<body>
	<form action="" method="post" enctype="multipart/form-data" validate> 
		{{form.csrf_token }}
		<div class="w3-container w3-center"> 
		<table class="table table-striped" id="tbl">
          <thead>
            <tr>
              <th>Table Number</th>
              <th>Menu Item</th>
              <th>Price</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="order_table">
            <tr id ="row0">
              <td>{{form.items.table}}</td>
     			{% for error in form.items.table.errors %}
				<span style="color: red;">[{{ error }}]</span>
				{% endfor %}
              <td>{{form.items.item}}</td>
              {% for error in form.items.item.errors %}
				<span style="color: red;">[{{ error }}]</span>
				{% endfor %}
              <td> {{form.items.price}}</td>
  				{% for error in form.items.price.errors %}
				<span style="color: red;">[{{ error }}]</span>
				{% endfor %}
            <td><button id="removebtn" class="btn btn-secondary" onclick="RemoveRow('0')">Remove Item</button></td>
          </tr>
          </tbody>
        </table>

		<button type="submit" class="btn btn-secondary">Submit Order</button>
	</form>
	<input id="addbutton" class="btn btn-seconday" type="button" onclick="AddRow()"value="Add Order Item" />
</div>
<script src="https://code.jquery.com/jquery-3.5.0.js"></script>
        <script>
        	//append not working but base script i think?
        	function AddRow(){
        		var table = document.getElementById("tbl"); //get the table      
    				var rowcount = table.rows.length;
    				var tblRow = '<tr id="row'+ rowcount + '"><td>{{form.items.table}}</td><td>{{form.items.item}}</td><td>{{form.items.price}}</td><td><button id="removebtn" class="btn btn-secondary" onclick="RemoveRow('+ rowcount + ')">Remove Item</button></td></tr>'
	        	$('#order_table').append(tblRow);
	            console.log("Clicked")
	        };
	        function RemoveRow(id){
	        	var removeId = "#row" + id;
	        	console.log(removeId);
	        	$(removeId).remove();
	        };
   		</script>
{% endblock %}
